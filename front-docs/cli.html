<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编写脚手架 | 日常所得</title>
    <meta name="description" content="一个前端的个人站点">
    <link rel="icon" href="/book/icon.png">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/book/assets/css/0.styles.64259fb2.css" as="style"><link rel="preload" href="/book/assets/js/app.983c8796.js" as="script"><link rel="preload" href="/book/assets/js/5.1742c36e.js" as="script"><link rel="prefetch" href="/book/assets/js/10.da845a38.js"><link rel="prefetch" href="/book/assets/js/11.1caf8d01.js"><link rel="prefetch" href="/book/assets/js/12.c601ecec.js"><link rel="prefetch" href="/book/assets/js/13.cf176923.js"><link rel="prefetch" href="/book/assets/js/14.c779bb5e.js"><link rel="prefetch" href="/book/assets/js/15.287a2825.js"><link rel="prefetch" href="/book/assets/js/16.06b9e1a0.js"><link rel="prefetch" href="/book/assets/js/17.24ed438e.js"><link rel="prefetch" href="/book/assets/js/18.e84357ba.js"><link rel="prefetch" href="/book/assets/js/19.3c920a8e.js"><link rel="prefetch" href="/book/assets/js/2.5deeb130.js"><link rel="prefetch" href="/book/assets/js/20.ad25a40f.js"><link rel="prefetch" href="/book/assets/js/21.9163c470.js"><link rel="prefetch" href="/book/assets/js/22.d3ef709f.js"><link rel="prefetch" href="/book/assets/js/23.7f36020e.js"><link rel="prefetch" href="/book/assets/js/24.bcef834f.js"><link rel="prefetch" href="/book/assets/js/25.b086ad25.js"><link rel="prefetch" href="/book/assets/js/26.67a7ab5e.js"><link rel="prefetch" href="/book/assets/js/27.79025d64.js"><link rel="prefetch" href="/book/assets/js/28.d79d5460.js"><link rel="prefetch" href="/book/assets/js/29.e1cc56d4.js"><link rel="prefetch" href="/book/assets/js/3.76a65929.js"><link rel="prefetch" href="/book/assets/js/30.92772f1e.js"><link rel="prefetch" href="/book/assets/js/31.d02288e7.js"><link rel="prefetch" href="/book/assets/js/4.b836e44f.js"><link rel="prefetch" href="/book/assets/js/6.ecf6eae9.js"><link rel="prefetch" href="/book/assets/js/7.4e04405a.js"><link rel="prefetch" href="/book/assets/js/8.69802f27.js"><link rel="prefetch" href="/book/assets/js/9.95d028bc.js">
    <link rel="stylesheet" href="/book/assets/css/0.styles.64259fb2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/book/" class="home-link router-link-active"><!----> <span class="site-name">日常所得</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/book/front-docs/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/book/project-book/" class="nav-link">踩坑记录</a></div><div class="nav-item"><a href="/book/linux/" class="nav-link">linux</a></div><div class="nav-item"><a href="/book/front-build/" class="nav-link">前端构建</a></div> <a href="https://github.com/hkx930919/book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/book/front-docs/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/book/project-book/" class="nav-link">踩坑记录</a></div><div class="nav-item"><a href="/book/linux/" class="nav-link">linux</a></div><div class="nav-item"><a href="/book/front-build/" class="nav-link">前端构建</a></div> <a href="https://github.com/hkx930919/book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/book/front-docs/" class="sidebar-link">框架</a></li><li><a href="/book/front-docs/a-typescript.html" class="sidebar-link">typescript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/front-docs/a-typescript.html#_1-枚举-enum" class="sidebar-link">1 枚举 Enum</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/a-typescript.html#_2-interface-和-class" class="sidebar-link">2 interface 和 class</a></li></ul></li><li><a href="/book/front-docs/cli.html" class="active sidebar-link">编写脚手架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/front-docs/cli.html#_1-前置知识" class="sidebar-link">1 前置知识</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/cli.html#_2-开始一个脚手架" class="sidebar-link">2 开始一个脚手架</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/cli.html#_3-脚本入口" class="sidebar-link">3 脚本入口</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/cli.html#_4-create-命令" class="sidebar-link">4 create 命令</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/cli.html#_5-init-命令" class="sidebar-link">5 init 命令</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/cli.html#_6-page-命令" class="sidebar-link">6 page 命令</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/cli.html#_7-route-命令" class="sidebar-link">7 route 命令</a></li></ul></li><li><a href="/book/front-docs/vue.html" class="sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/front-docs/vue.html#_1-vue-extend-方法使用" class="sidebar-link">1 Vue.extend 方法使用</a></li></ul></li><li><a href="/book/front-docs/vuex源码分析.html" class="sidebar-link">vuex</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_1-入口分析" class="sidebar-link">1 入口分析</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_2-install-方法" class="sidebar-link">2 install 方法</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-store-类分析" class="sidebar-link">3 Store 类分析</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-1-环境判断" class="sidebar-link">3.1 环境判断</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-2-初始化变量" class="sidebar-link">3.2 初始化变量</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-3-分析-module-js" class="sidebar-link">3.3 分析 module.js</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-4-dispathc-和-commit-的设置" class="sidebar-link">3.4 dispathc 和 commit 的设置</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-5-installmodule-分析" class="sidebar-link">3.5 installModule 分析</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-6-resetstorevm-分析" class="sidebar-link">3.6 resetStoreVM 分析</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-7-enablestrictmode-分析" class="sidebar-link">3.7 enableStrictMode 分析</a></li><li class="sidebar-sub-header"><a href="/book/front-docs/vuex源码分析.html#_3-8-vuex-的浏览器插件" class="sidebar-link">3.8 vuex 的浏览器插件</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="编写脚手架"><a href="#编写脚手架" aria-hidden="true" class="header-anchor">#</a> 编写脚手架</h1> <h2 id="_1-前置知识"><a href="#_1-前置知识" aria-hidden="true" class="header-anchor">#</a> 1 前置知识</h2> <h3 id="_1-1-commander-包"><a href="#_1-1-commander-包" aria-hidden="true" class="header-anchor">#</a> 1.1 commander 包</h3> <blockquote><p>它提供了用户命令行输入和参数解析的强大功能，可以帮助我们简化命令行开发。</p></blockquote> <ul><li>参数解析</li> <li>强制多态</li> <li>可变参数</li> <li>Git 风格的子命令</li> <li>自动化帮助信息</li> <li>自定义帮助等</li></ul> <p>举个栗子,生成个 app.js，使用<code>node app.js m app</code>来运行：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'commander'</span><span class="token punctuation">)</span>
<span class="token comment">// const inquirer = require('inquirer')</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span>
<span class="token comment">// const success = (...args) =&gt; {</span>
<span class="token comment">//   console.log(chalk.green(...args))</span>
<span class="token comment">// }</span>
program
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span> <span class="token comment">//义命令行指令，后面可跟上一个name，用空格隔开，如 .command( ‘app [name] ‘)</span>
  <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">'m'</span><span class="token punctuation">)</span> <span class="token comment">// 定义一个更短的命令行指令 ，如执行命令$ app m 与之是等价的</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">'创建模块'</span><span class="token punctuation">)</span> <span class="token comment">// 描述，它会在help里面展示</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span>
    <span class="token string">'-a --name [moduleName]'</span><span class="token punctuation">,</span>
    <span class="token string">'模块名称'</span><span class="token punctuation">,</span>
    <span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---option'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'ccc'</span>
  <span class="token punctuation">)</span> <span class="token comment">//定义参数。它接受四个参数，在第一个参数中，它可输入短名字 -a和长名字–app ,使用 | 或者,分隔，在命令行里使用时，这两个是等价的，区别是后者可以在程序里通过回调获取到；第二个为描述, 会在 help 信息里展示出来；第三个参数为回调函数，他接收的参数为一个string，有时候我们需要一个命令行创建多个模块，就需要一个回调来处理；第四个参数为默认值</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//注册一个callback函数,这里需注意目前回调不支持let声明变量</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'--help'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`app module modulename`</span></span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`app m modulename`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token comment">//– 解析命令行</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>program<span class="token punctuation">.</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  program<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>为了方便运行，将演示的文件加入到 package.json 里的 bin 字段，并且<code>npm link</code>到全局</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;app&quot;</span><span class="token operator">:</span> <span class="token string">&quot;app&quot;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>#<span class="token operator">!</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node #表明这是一个可执行的应用
<span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'commander'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">success</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
program
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span> <span class="token comment">// 定义命令行指令，后面可跟上一个name，用空格隔开，如 .command( ‘app [name] ‘)</span>
  <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">'m'</span><span class="token punctuation">)</span> <span class="token comment">// 定义一个更短的命令行指令 ，如执行命令$ app m 与之是等价的</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">'创建模块'</span><span class="token punctuation">)</span> <span class="token comment">//  描述，它会在help里面展示</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span>
    <span class="token string">'-a --name [moduleName]'</span><span class="token punctuation">,</span>
    <span class="token string">'模块名称'</span><span class="token punctuation">,</span>
    <span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---option'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'ccc'</span>
  <span class="token punctuation">)</span> <span class="token comment">//定义参数。它接受四个参数，在第一个参数中，它可输入短名字 -a和长名字–app ,使用 | 或者,分隔，在命令行里使用时，这两个是等价的，区别是后者可以在程序里通过回调获取到；第二个为描述, 会在 help 信息里展示出来；第三个参数为回调函数，他接收的参数为一个string，有时候我们需要一个命令行创建多个模块，就需要一个回调来处理；第四个参数为默认值</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//注册一个callback函数,这里需注意目前回调不支持let声明变量</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'--help'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自定义生成帮助信息</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`app module modulename`</span></span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`app m modulename`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token comment">//– 解析命令行</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>program<span class="token punctuation">.</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  program<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>运行 <code>app m -help</code><br> <img src="/book/assets/img/cli1.443aa191.jpg" alt="运行结果"></p> <h3 id="_2-inquirer-包"><a href="#_2-inquirer-包" aria-hidden="true" class="header-anchor">#</a> 2 inquirer 包</h3> <blockquote><p>在开发的过程中，我们需要频繁的跟命令行进行交互，借助 inquirer 这个模块就能轻松实现，它提供了用户界面和查询会话流程</p></blockquote> <p>语法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
inquirer
  <span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token comment">/* Pass your questions in here */</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">answers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Use user feedback for... whatever!!</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>inquirer 功能简介</strong></p> <ul><li>input–输入</li> <li>validate–验证</li> <li>list–列表选项</li> <li>confirm–提示</li> <li>checkbox–复选框等等</li></ul> <p>举个栗子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>#<span class="token operator">!</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node
<span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'commander'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">success</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
program
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">'f'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">'创建一个文件'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'--name [fileName]'</span><span class="token punctuation">)</span> <span class="token comment">// 关于option的使用，在使用命令时添加参数 --name myfile 就欧克</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'--sass'</span><span class="token punctuation">,</span> <span class="token string">'启用sass'</span><span class="token punctuation">)</span> <span class="token comment">// --sass 则sass为true</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'--less'</span><span class="token punctuation">,</span> <span class="token string">'启用less'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
      <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        description<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        less<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        sass<span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      option
    <span class="token punctuation">)</span>
    <span class="token keyword">const</span> promps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promps<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'moduleName'</span><span class="token punctuation">,</span>
        message<span class="token punctuation">:</span> <span class="token string">'请输入模块名称'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">validate</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>input<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'不能为空'</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>description <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promps<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'moduleDescription'</span><span class="token punctuation">,</span>
        message<span class="token punctuation">:</span> <span class="token string">'请输入模块描述'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>sass <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>less <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promps<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'cssPretreatment'</span><span class="token punctuation">,</span>
        message<span class="token punctuation">:</span> <span class="token string">'想用什么css预处理器呢'</span><span class="token punctuation">,</span>
        choices<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'Sass/Compass'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> <span class="token string">'sass'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'Less'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> <span class="token string">'less'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>promps<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">answers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'收工咯'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token string">'收工咯'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span>blue<span class="token punctuation">.</span><span class="token function">bgRed</span><span class="token punctuation">(</span><span class="token string">'收工咯'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//支持设置背景</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>answers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token comment">//– 解析命令行</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>program<span class="token punctuation">.</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  program<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><p>显示结果如下<br></p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAAEJCAYAAAAn97qKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAACRxSURBVHhe7Z2/q21JlcfnH5hgBHXEphERtGEUtDtqgycMQoPBm/Q9QYyawdBEB5q+nRiYmIpczJpBuE5sojbXsHlGHRs3mHe8Z6/6sfeqVWvVj/3j3Dqnv8GHu3etVat+rfqe2ueee+6/vP766xMAAIwIBAoAMCwQKADAsECgAADDAoECAAwLBAoAMCwQKADAsECgAADDAoECAAwLBAoAMCwQKADAsECgAADDAoECAAwLBAoAMCwQKADAsECgAADDAoECAAwLBAoAMCwQKADAsECgAADDAoECAAzL1QrU3cOr6fH+hWrbx9308OrV9Orxfnqh2i/DeeO7HFvH8OL+cXpFa0A83Ck++ho1tXf3sMZ+9aj7gGHoEKiQFJwkeXL7wx2vr5Aki6c5oV/cT4+niMjxArVpox49vj1zvZWdY3BC1SFQ9fZ8vWpeHoS+7rIPL6b7Rz+W1A8Q3QKVTaxLoB+56+6Ed5vmYbqL95RgzRvHt3+pZNvDtpPEwePbNddb2TcGW6AsKu25MbM5OJkWgXJjPPKFSIPWvmsex2GHQM2EpH/9R+/PC/843b9gthbkpmFlq59vV51g8s0Wl5KU+hLqOdY2YtLwx4gkWWId3p5b4HuX/PRYcH/nN/f6quc3xlI39CmJx1lii3pyjNr4Sn0Jc6fOZ8nm7o2+lNpz9fg8+/Ksv7KM21hduZk1gTLXKFJtLxeoUk7Y47PzrLzu3t/FzwSznLtWX3Qh9OvJr815Mfn69NGn/zl99lng029P7y3lb08fvffN6ZNo++zN6cOqrZ9jBOr1/1oTuEektIRxi8bfGwiLoiWjs8k240Zby2kBY313zeK5ZJoXbq2vbIywkWjsvj712bft/R9YH3z7PGH0BEr7pdVTx1fsi58rvkZLG5W5NvtSbE/2Ocw9nzttDISLW86XbB2abHl7ZcGI41rv15wojS9cL21JXx83XU8irhH5y/GXYsr4wXfuiz4X3s7L1vXjfjbvffTmLDTx3ovVpx99fbn+7DMSIm//8JP5/pNvVmwxVjs7BMrf8wXgiZAvjIK2aUKCJX4F8sXxC8M3qWsniJBbJP5KEl7FFt+ZLGaon75a2f2U9e1EFWNn/Yz09iX19+Uu2YtzXehLqT0tZst8ZptNJ6+306bOQSEniuPL80y2a6+7tUcKMUt9IVtoV8sJjosXc0LYarz30duJCH3yIbN/+KY7YZVtrKyRXW+SmwnmJm72MRJowZx0feOrhEVaYxgC5ZLKSpqULMGpfkEUlvFyaomq1SFIFDI/Nr6mvgR/lrjFuS71pdQes6UxU4HKxhByKVkjBVNoKra8vYA2BzNmThTHt0+gHu78HGonKFOgrL7QT2ebYz48zFAfKL5YhxkXj9bWmjvOe9+ePl0e0wIlgZof5co2VtbIvke8Am4i5knTbAtKwvgJzCe2RJoIhkCFvpjJyJCJxpMj26RhXnhMWV9t09pECkn9Yl/Ifx0/2Zd5KM11qS+l9pSYsSyJMZPOgbJGCtk6NNqItL2A1t8Z1Zcojm+vQM3XWfyKQJl9oZizbb6n9u5mkboLorX4zlB/shgm/j0k/0jny67iBFVLKo+f6FICOeSku3vZhm+3GIvqhU2UL7KvHxPFTEZGlvws/lqf4q4CtbTnNnvaXxdv6V+kcY4IPr5iX7j/Y/ordyoz57rQl2J76dzGOOr8sjh07+akslmydWi0OUR7S5nSpp0TpfHJPMv7pK97mi+pTylmqS9ke5juw3uhVIdOUrwvNMa8LyW8QC1CE09TqkBxMSvZYlk7xwjUe//rkj2hlDyRsElWtGdj3245Hl9Yf83j8uSzkzGv56B2i5s0JNFShxIlTdQs9mIr91XWd+Or9MXj5yyJVZ1roy/V9sL6RMx1YmMIZem8xdh5PxwubsnG2yLy9vwc9AgUYY3PGE/SF9FfZ/Px1nrRp+VUVu7LIkDhRXIZE4076Vcb7sREouR4c/pInKD4o98qQCVbPx0CNThhI2mLfBMs41NsGV5AtrwReipdYziAS7f3uUF5jGuy9XM7ArVwowLVAZ0ItrxiAtAGBGoHn1+BcsJER/941AfgFCBQAAAAgQIAjAsECgAwLBAoAMCwHC9Q9Kvd5bMa/LM5wMScs/C5F/Gmd/L5Ify2DtwwBwuU/BAaqFOaM12gIvkHAwG4LY4VqI6/LwOBHXMGgQK3zrEC5R5VLiFQb0zPXr6cnr3x1vT83Xendx3Pp7cSeyyfeflseoPK33o+vfv8WbDN9d96Nr0MdrXe87dCeQEa85YvkBP3cs5aHuN0gQp/9lCpC8A1cIhAJZuJc9rmiEJCIrXev3z2hrO/8ex5KBc2EqhZeJ6/9fr01nOqT6JGIvfS+bqyRZTSmCZOYPwjmv+gJImN/1MT7fEtfsq7dc5KpyTNln6K3IuV/XdmAIzNFZ+gvNDEsjeevTRPPIuNBCqcpkiMvPhEgaKf/BQ2E/x5rAwac3iPiMRB/jFtKiK+PPkbucqc9QkUxVdObHSa42UAXAlPL1BvhMesBSYSpq0iUFm9mZpAaXWInQKVvMdEvlJsjhSo+FUvEggUuFJu8ATl35fij2ZNJygnUOIE1UJNoNjfBpI9+23d4QJ1ifkH4DLcrEAttngyqglUiOljrHGrVAUq+ogvkOO2owQqvkFu+ANwbdzke1DuOj6izaeiZy0nKBaXP+Lxk5hKi0C5+2hjdQl1zsRv4iJOeEo2va7aLgBXwLECBQy8YA33BXIADA4E6gLQyQqPXQD0A4E6ESdM9JilvfcEAKgCgQIADAsECgAwLBcQqPfdb7DoN1XvX8TGafXT6K0b/B/ez8vMGNJeu68R/P/6u+nHqv0Y/u0Pf1evNaK91a8Vzb83BhifC52g+EaL1xa1zenLH+4su6TVT6OnbvClfz291KnVl/bavVUmbH99DJ8ot9rN4ZubriWWr3bP4baSH1Gzc6JvT3xwfXQK1NvTl/78P9O/znzhV/+h2C2sTVUr55CP9Lfqc1p8LFrrBj93cuF1avU13xIxjhU3lGf94D422qbfcs8p2SStvtzPuga3wcYTVBCq372t2GrUNqK1CSubsrgRaz61PlmIviXCYEF1dJ/8VCjvZX+N8p2PeHGj135KqLxGq59EtsOvLXgdcJ1sf8T74TvTF/78s+nff6jYmqlstOX9HH+/buCU+uNezc6xfGvlM9mj1ZH90mBtFynHl5s53td+tlDzteyl8miTPlYdcL3seA/Kn6K+9N+aLSI20LKBa/xl+gv9TN7P0eK34Puw/z0rrVzEzk4utTa5PV5btPa7xTeHb24pAKWfEbrXKNkIy66Vx7KeOuC6udAJytrAFvlm1U5Pj7/9sfDXNqa3tQsUIX1rdYP9EIFquQ4k7Qmb2WYdKQTWzwi/p+uItFlIn1ody97SFrgu+gXKCVPvG+Vh87gNJTeShG8sbXOu14+//Z37aYuPLLf8JL31gn2zQMkxWNei3tKev19Pcv2/xSPiBm/9GSndS5tGLZ7Esre0Ba6LbQL1f+9Mr2k2E76htA3HfLSNmGzUlfMEivC+bSev4NP7CLugjy+Ftx/bswSqNM82cYO3/oyU7qXNwoqtwX1ryLrgutjxHlQP2saxUDbijHbCKAuUVlYq12j1DX6LYIhysz63t1yLepkQ8XIZP9bV0TazLIv3VnnrvcVev9b64HroFqjXfvWz+fGu97d3cePwE4bcNMpGS3xl2dkC5f36TlCXFijjt4YHCFS81zZ9zbdm12jxiVg+LXXBdXFZgZpZN7yFshH5RmWnBlug5L2k197of3GBMtrLystoG5uXSbt2L/15mfwpkeWWX6Q1Drh+LvuIZ2446VOolwiU9ls8LY6G5hfLtPoNtkMEyiLG8H5tJ7s2agLRek8/I9zObbWyVltPObheLiRQHLmx5MbkG477hmv2mBhPUGvd+OZz66aN8fmb1rW6vL9iDM0CxWNEe81X85FxLGRMm9Imj6KxVQhivZ4Ymq9VtzUmuB6eQKAAAKANCBQAYFggUACAYbmgQFnvsZyF1l5vHy7d5yOw+nzGWGLMFPs3tdc0j2AEnlCgWpLY8rHQ6tbKSvT6H4Ex5uUPpy1iH60+94zF6MOC1Za/3/6xD4uWPoNbpFOgtnxhnZ58bUl8iTKLHt8zCf1o/iphy1YrX0nXxrrWYvr78trG65XcP2KVN8D+oapqBzP+n7yO/I9dN56gtnxhnZW0Ep6MWoK2lGk+pXKN1phn4NvSN26tH9HOId/WetLXuuZ1UtZ+S/R4hwvUi/vpkf+jVO2/N4ey5f5zyc0K1MyWr1tZkInKfXgybi3TfErlktZ2z6TUB0n0kXX4vawrx1Hylci6FrI/ssxf24IWaW2PUDYdBMrglgWq6QvrCJGE4YOW5VfZtG7uY7EmvW63sDZQqSzlxf0ji8cXnf7t+Vr+KvkX6JqtNC/eZn8PVuneuo59afHV6kmkT+neX8dcWMe1A+3RripQfqPyuV59ha35P0SLeqxP9A9dKT94zjzc1W1ZvoSYsc7aNuHbT8skUqBifGNe4th3zWcfJ5+g8mRcP23Nbdr9ljL/ifDtjwzb6sVkWhMpEhZKfS+kZCNimxFq25e1/w0iv7ds8qtfZNzadS/80/4+xipQ4S8DOv+WkKNu1sqGcutnCI/779CLTW5omxf3D+yFKK3nYtI4Q1zX/pwHZZtsO+TP7Kf339vTMgmP6cWJj80eu/fl+c59S/PZS79AbfrCOiIk9KkCVYpVKi/ZSnWI8KpTEqHZboqXaiO0dn2ZLlD+et3sdBrJ7Wu80n28toh1OLX4mp+/tgXKimHh5zSbzxaBknYHra1SL4hJD3zTus3M88W9Z+b7Ytq0MXAbi72KyOPqqxJF597PPxOn2thTEfJtRUG257OfbQLV/YV1REi2LPkkPBktH4uezbGnnBMEynrFcElEMSLsEa9kU9v2ZfYJKvdZbbWxWPbWeqW63Mbj+etcoEpfy1PCr0WvQBFOGEKby0bN1ifQIlBa3UxE8nqmLYhD8iIYBYp+Ots8fvo4imvHC0wSI2N9kUxzb6Y29tC2m1MmkBF1Pjew4z2oPfAk1ewRza+lzIrf2i7R6hsESiaPgn9lmX0VMctt9jjHEKhYXooZ4b72I+XaZ6IWU8M4QfHNFGGngRS/nm5TafWaYDFCmTxBbRIobQxzWRSju/me6t7NInUXRCuJkRFPUPE9Lxa/OvZ1rqnP+lMAkc9FD90Cte37oAiZ6LX7PWWaT6lc0lc/vlrYixRwiz77KgKV27S2fFlZoMp1c19p53EtYgzdz65P9Xg//HUuUFYf6+gb3G+SdX3WjZn6SZu/VteriGhPrO0mgco2Ou+nF6j78L4XiQ2dpOr9TufB5fHyQtswdify82m3+OKcttHLBQQqTcI8uXky8jLN3lLP8imVc2o+uj2K1IJbWJ9USfmymCWb3U4sr4lTKhLkU/Zf/biN21ts/r5trSPcpvmV6ipoJw0iikRk2XhhI6o23d6y2ZYTsYPEY+cJyiFyRo4h5k8Ya72fUjziWON7V7WxS9HU66Tz2ccFHvF8gtU2lC+3ri1/q6ynrrT1oMU5ii3jLNWxqI1Bi2nZ/P2TClS26cB5kECJ964O5mSBshJVY0tSyniyHVm/NW6No+Jo9IyJlx09thq8zZT09MaRfdP63Fq3gDtBnLtxQHhq2HE6auGJ3iQH4GTc+yOl90bAVpa3My4wvxAoAMCwQKAAAMNyQYHS3m84k9L7G619uHSfj8Dq8xljiTFT2t+DAqDMEwpUSxJbPhZa3VpZiV7/IzDGjC+sU+qBW6dToPCFdZcn9ANfWMfKx+Srv/779MVfvlRtYBsbT1D4wjq9zlH4tvSNW+tHtHPIt7We9LWueZ2Utd8SPd5xAvXB9OXwf/QiX/6J5ncCP7ifvviHP05f5WU/+SPry9+mr/yA2UAT2x/x8IV1J1PqgyT6yDr8XtaV4yj5SmRdC9kfWeavbUGLtLT3cvrK/dOdYF775d+Stuk+FaW5f79u+CNjkLDjPSh8YR0n/dMG/klm+Sct/AOEmq00L96GL6xTcCeY0inFC9hyorm/Z9/IIWzJSahki9DJjbftT3L26U2c9GJf6MQ1i5hvb473ExqTt/t+UBu8bqGfh47v6Tj5BJUnI76wrsVGxDYj1LYvs/9YuHRv2W7lC+viRtNF6rVf/jE9zcy+8cTjTju//mDx5ZRskczHPdpZGz1te+k31Q+PhCRs9H6Wj+HFTxuf8wntnjm+p6RfoPCFdYJwCiqJ0Gw3xUu1EVq7vkwXKH+9bvbP4xfWhQ0XTgOlxz2+MX0dXVBKNo8Xg+S0VBIozRbev3K2cPJZ33BPBSprx52uWFnguPE9LdsECl9YxwgCZf1Nkvwrev6IV7Kpbfsy+wSV+6y22lgse2u9Ul1u4/H8dS5QW7+wjuE2/XrCWO457OTgTyweKWwlGxeVpKwkUNJ/j0BRvSXG2k/HEeN7Yna8B7UHnqSaPaL5tZRZ8VvbJVp9SyeolOV9KkXMcps9zjEEKpaXYka475lfWJfiTgfuhOHft+Gbj58wUnLfkm0VEuYXxEJ9D0oTryg0WwTq5PE9Nd0ChS+sy8vjH0/qj2qMeGLSTluZTWvLl5UFqlw395V2HtcixtD97PpUj/fDX+cCZfWxB7+h/Sb1G2/Z3PJ0pdTTN6mwhZOPdlLypxJum+u63+JJEWAxuwSKxzlpfANwAYFKkzBPbp6MvEyzt9SzfErlnJqPbl/+wjvihEb+lm5mOWmVbHY7sbwmTqlIkE/Zf/XjNm5vsfn7trWOcJvmV6rLcKcQ/5iywDaof68l2v44fWU5YfhNqdcr2UqnFA9/dErfvPeCksVsEKg1XiokZ4xvBC7wiOcTrLah8gRt8bfKeupKWw9anKPYMs5SHYvaGLSYls3fP4lAXRwvHNpvDM/Bi4n62HjDnCxQVqJqbElKGU+2I+u3xq1xVByNnjHxsqPHVoO3mZKe3jiyb1qfW+t+3oBAAQCGBQIFAABDAYECAAzLZoGiT5KX7s/kkm0BAJ6OiwgU2VrR6kta/QAA102XQHFhkCLRKxo1f7JzWm0AgNvhUIGScLukx25da/cAgNvhEIHaIho1Hy2+9RMAcJvsFihNLFqEo+ZTi9fSBgDgujnlPagW8aj5tLTV0g4A4HrZJFD00xINeW1R87HiyXotbQEArpNugYqCYAlFq2DU/Li9FpvKa/EAANfH4Y94rUJR8yM7xyrnNgDAbdElUBxNGHrEoubL7da1dg8AuB0OE6h43yoYW4XFahcAcHscIlAl0aDrXngsSa8/AOB62S1QlkCcJRwyLgQKgNtls0ABAMDZQKAAAMMCgQIADMtmgfr+b/5ZvD+TS7YFAHg6LiJQZGtFqy9p9QMAXDddAsWFQYpEr2jU/MnOabUBAG6HQwVKwu2SHrt1rd0DAG6HQwRqi2jUfLT41k8AwG2yW6A0sWgRjppPLV5LGwCA6+aU96BaxKPm09JWSzsAgOtlk0DRT0s05LVFzceKJ+u1tAUAuE66BSoKgiUUrYJR8+P2Wmwqr8UDAFwfhz/itQpFzY/sHKuc2wAAt0WXQHE0YegRi5ovt1vX2j0A4HY4TKDifatgbBUWq10AwO1xiECVRIOue+GxJL3+AIDrZbdAWQJxlnDIuBAoAG6XzQIFAABnA4ECAAxLs0D9/bvfvQq0vgMArpPNAkXv/ZTuz6TUltZ3AMB1chGBIlsrWn1JyU/rOwDgOukSKC4MUiRaxSVS8yc7p9Wm9R0AcJ0cKlASbpf02K1r7V7rOwDgOjlEoGqioVHz0eJbPzla3wEA18lugdLEQhMOSc2nFs+qr/UdAHCdnPIelCUenJpPS1taDK3vAIDrZJNA0U9LNOS1Rc3HiifryXut7wCA66RboKIgWEIhyy1qftxei03l0ab1HQBwnRz+iCfLLWp+ZOdY5dxGaH0HAFwnXQLFkcJglVnUfLndutbutb4DAK6TwwQq3styi1Y/idVuROs7AOA6OUSgSqJB173wWJKav9Z3AMB1slugpEBErPK9yLgQKABul80CNSpa3wEA1wkECgAwLM0CBQAAlwYCBa4aeg9Su9aI9la/VjT/3hhABwIFhoNvbrqWWL7aPYfbSn5Ezc6Jvj3xQRvbBOrNP03fmxfg+7/5x/StN0PZOx8v91/76T/m64+nb8h6O/nGz/85fe+nv1BtHN9+SOif/171uQ5+P32HxvDBn6avqfYtHBxz67pX6mmbfss9p2STtPpyP+s646Q5u0U2CNQvpm99oAjFQAIVcf1oFSjX/yBqgZ62zmGbmJTn6ToEKhI3eu2nhMprtPpJZDv82oLXOXvOjiHkCecJXuw3CBR13E9SUu5OVWHCaCIPfdX3nC9QbMHDKfHpRaqf3nnaxdZ1N+rJzRzvaz9bqPla9lJ5tEkfq47j4DlTfXfjBeo778R7fzC5tEgdJ1AWNJE//5MfHNV7x298mlzvI5Q6mfQwKczuN54vXydPFyNdoETMaKd+coFiZcV6mk2Ns9qjeEQh8a+G3hbHxMvytmj++bz59pI6nFDfjklY62C3l9a3CPWy9myoDXnd8jNC9xolG2HZtfJY1lPndIw8K+enZfPrxvcY3w+l3M1idqy95DICFTpPg/IT4GPEgWQTGQbk/Nng1pOB99siUGlM1n6Y/GTjuVcs6meh3nyvtbPg4urz5edjjeviLMLtyWOHOWIx7XmKdVKsmPo6yPakb41+geLQ/LT8jPB7uo5Im4X0qdWx7C1tHUohz0r5advqAkVjjHV57pb2Si/9AsWPmS3QoMKr8bpxgkCZojBPgtLOWt8Pul+gqF3RXuif2pdFSAv15mvXTlaXKC+OW8gwN64sjp355GPIx877QqzzxHwYWczSOjTO9dHEDd76M1K6lzaNWjyJZW9p6zjKeWbnZ8kmBcrfxzbs3C3vlV46BMp3MOlUC6FzpkDJeGcKlIs5j0FCk2du0rmfpXrB1y1YKF8TRS5ySk1IiHxchkC55PD3tbhZzNI6fM4EirBia3DfGrLucZTzjNDzs2QL+53B65k51rBXehjvBBU3m9LOWn+PQBl9V/ri6ht9sfELa/WTYy4yIx+XIVBCLEtxs5ildXgCgaKErpXFe6u89d5ir19r/WMo51kKz8+SzV93526vPlS4zHtQlkBlk+UnWpsgLxbRxv1CG7OtKlChnrq55CYNMX37hXoZad98v/UFO0ag5ByGOvJExMhjltZBtqfVL+Fjt/vboiLLtTLpW7NrtPhELJ+WuiZuk/tTh7WGklKepaT5advS/Sexc9fH6FnvEk8sUOQTEjjCBxaFJ5TTIiyTEheRmON/Y9k0YYKiLbLEze0uJm/LIcdo1NPaE4vjk2e1xzFUF5nVcRjjy2MIn6Z5sdbB17uUQFHbpTJp1+6lPy+TPyWy3PKLtMbpI65V30lEzzNl3cXa6ja/bv0CReRxbd8y5wsUOJhcMG4JSuYj7ulnhNu5rVbWauspb4UEoOcEdatsEKjb3iDj8/mZ/9Imj6KxVQhivZ4Ymq9VtzVmRjzJQ5wcGwRqZnm8wknq8uAFAnx+2CZQAABwASBQAIBhgUABAIYFAgUAGBYIVCvutyv+lwLtH4qb2VrvDAp9WT5Dg98egYHoFqjyB7SOZ5j2blygIpeebwBKQKAEZnv8b4xoo7eeNLbWO4OWvlB586fEATiXZoFaHgEkIZnjxuZ+62d1xEffkw0gbGHTFNtzm6j0JXhWe1ROJwj+Zx1+w9bGV6fvTzo8op/JiUafl+56ia0BCBQYiMNOUFTuNkRIbrfhg2A4WyISa4yv/fRj98ih2WLdrD3aRHNbJIC+XdqE/k9wYh29vbh5/WNOc3tN9AuUmyPDvzQv5Xq2rQkIFBiIYwWKv8qHxwm/ccWrOG2C5bSTIjeY2l6oT22t9ihQpfb8Ruefwm5q7yRc240nHN7PUr2emCr8MRCAJ+ZQgVI3tkt4OrUIokBp9j0CVWxvLIEiqL3Yx6TdhnlR61VsTcS2WXsAPAUXEijrFdk/FvF6TYJRFSirvfEEaoXPRX1eVnLfNpsBm1vVDsAF6RYot1GUBLY3theF0uZaBEN55VbbKz7ildqrC5Q1vjp+LHq7Lfi+rWMpz4ter8dmQHO7eQwAHEu3QC0CQBuGbZryyUPUmYm+ThCW8o+nbwnBUNsrClSpPV9eEihrfHV6BSrvI69rz0upXjlmExAoMBAbBArcNBAoMBAQKJDwdO/BAZADgQKO9ZESHzEA4wCBAgAMCwQKAJDx6tUrE83/LCBQAIAMTZgimv9ZQKAAABmaMEU0/7O4WoG6e3g1Pd6/UG37uJseaCEe76cXqv0ynDe+y7F1DC/uH9cN8XCn+Ohr1NTe3QPbbI+6D2BzlKP5n0WHQIWk4CTJk9sf7nh9hSRZPM0J/eJ+ejxFRI4XqE0b9ejx7ZnrrewcgxOqDoGqt+frVfPyIPR1l314Md0/+rGkfk+LzBWO5n8W3QKVTaxLIH/dnfBu0zxMd/GeEmxuoy2Ob/NSybaHbSeJg8e3a663sm8MtkBZVNpzY2ZzcDItAuXGeOQLkQatfdc83oRAzYSk9wv/ON2/YLYW5KZhZaufb1edYPLNFpeSlPoS6jnWNmLS8MeIJFliHd6eW+B7l/z0WHB/5zf3+qrnN8ZSN/QpicdZYot6coza+Ep9CXOnzmfJ5u6NvpTac/X4PPvyrL+yjNtYXbmZNYEy1yhSbS8XqFJO2OOz86y87t7fxc8Es5y7Vl90IfTrya/NeVFY2lDQ/M/iGIFakpsml9lraAkTxG71C4uiJaOzyTbzvtACxvrumsVzyTQv3Fpf2RhhI9HYfX3qs2/b+z+wPvj2ecLoCZT2S6unjq/YFz9XfI2WNipzbfal2J7sc5h7PnfaGAgXt5wv2To02fL2yoIRx7XerzlRGl+4XtqSvj5uup5EXCPyl+MvxZTxg+/cF30uvJ2XrevH/XSyuWJo/mexQ6D8PV8Angj5wihomyYkWOJXIF8cvzB8k7p2ggi5ReKvJOFVbPGdyWKG+umrld1PWd9OVDF21s9Ib19Sf1/ukr0414W+lNrTYrbMZ7bZdPJ6O23qHBRyoji+PM9ku/a6W3ukELPUF7KFdrWc4Lh4MSeEjRP3sYbmfxa73iQ3E8xN3OxjJNCCOen6xlcJi7TGMATKJZWVNClZglP9gigs4+XUElWrQ5AoZH5sfE19Cf4scYtzXepLqT1mS2OmApWNIeRSskYKptBUbHl7AW0OZsycKI5vn0A93Pk51E5QpkBZfaGfzjbHfHiYoT5QfLEOMy4era01d4EsFxia/1nse8Qr4CZinjTNtqAkjJ/AfGJLpIlgCFToi5mMDJloPDmyTRrmhceU9dU2rU2kkNQv9oX81/GTfZmH0lyX+lJqT4kZy5IYM+kcKGukkK1Do41I2wto/Z1RfYni+PYK1Hydxa8IlNkXijnb5ntq724WqbsgWovvDPUni2GgCVNE8z+LkwTKT3QpgRxy0t29bMO3W4xF9cImyhfZ14+JYiYjI0t+Fn+tT3FXgVrac5s97a+Lt/Qv0jhHBB9fsS/c/zH9lTuVmXNd6EuxvXRuYxx1flkcundzUtks2To02hyivaVMadPOidL4ZJ7lfdLXPc2X1KcUs9QXsj1M9+G9UKpDJyneFxpj3hcbLkgSzf8sjhGokOwJpeSJZPW0Z2PfbjkeX1h/zePy5LOTMa/noHZZsmui4JJoqUOJkiZqFnuxlfsq67vxVfri8XOWxKrOtdGXanthfSLmOrExhLJ03mLsvB8OF7dk420ReXt+DnoEirDGZ4wn6Yvor7P5eGu96NNyKiv3ZRGg8CK5jInGnfSrztKGguZ/Fh0CNThhI2mLfBMs41NsGV5Aam+EXpyuMRzApdu7ITRhimj+Z3E7ArVwowLVAZ0Iel8xAeBowhTR/M8CAnVDOGGiJIpHfQA2IkWJo/mfxQ0KFABgL5owRTT/s4BAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAYYFAAQCGBQIFABgWCBQAYFggUACAQXl9+n+lCFzaG5TD9gAAAABJRU5ErkJggg==" alt="显示"></p> <h3 id="_3-chalk-模块"><a href="#_3-chalk-模块" aria-hidden="true" class="header-anchor">#</a> 3 chalk 模块</h3> <blockquote><p>chalk 美化命令行的模块，它具有轻量级、高性能、学习成本低等特点。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'收工咯'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token string">'收工咯'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span>blue<span class="token punctuation">.</span><span class="token function">bgRed</span><span class="token punctuation">(</span><span class="token string">'收工咯'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//支持设置背景</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span>answers<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-开始一个脚手架"><a href="#_2-开始一个脚手架" aria-hidden="true" class="header-anchor">#</a> 2 开始一个脚手架</h2> <p>类似于 vue-cli,create-react-app 等脚手架，通过脚手架，我们可以快速初始化一个项目，无需自己从零开始一步步配置，有效提升开发体验。<br> <strong>脚手架的作用：</strong></p> <ul><li>减少重复性的工作，不需要复制其他项目再删除无关代码，或者从零创建一个项目和文件。</li> <li>可以根据交互动态生成项目结构和配置文件。</li></ul> <p>此次实现的脚手架是一个 vue 多页面的脚手架，包含以下功能：</p> <ul><li>create,新建项目，从远程拉取页面模板</li> <li>init,初始化项目</li> <li>page,新建一个 vue 页面</li> <li>route,给指定页面新建路由</li> <li>update,更新脚手架(暂时未做，因为模板的打包暂时没有拆开，而是类似于 vue-cli2 那种集成在模板内部，后续将打包和模板拆分开来)</li></ul> <p>文件夹目录如下：<br> <img src="data:image/png;base64,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" alt="目录">
接下来就是实现这些命令了。为了测试这些命令，最好使用<code>npm link</code>，将该命令行变成全局。</p> <h2 id="_3-脚本入口"><a href="#_3-脚本入口" aria-hidden="true" class="header-anchor">#</a> 3 脚本入口</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node
<span class="token comment">// 编写指令</span>
<span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'commander'</span><span class="token punctuation">)</span>

program<span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../package'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">)</span>
program
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'create'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">'创建一个新工程'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../command/create.js'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
program
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'route'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">'新建路由'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../command/route.js'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
program
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">'新建页面'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../command/page.js'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
program
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">'初始化一个空的工程'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../command/init.js'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 解析命令行参数</span>
program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>program<span class="token punctuation">.</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  program<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="_4-create-命令"><a href="#_4-create-命令" aria-hidden="true" class="header-anchor">#</a> 4 create 命令</h2> <blockquote><p>create 命令的使用方法，<code>hkx create projectName</code></p></blockquote> <p>实现思路</p> <ul><li>拿到工程名称，如果命令后面没有工程名称，那么就询问且输入工程名称</li> <li>判断工程名称是否合法，判断该名称的文件夹是否存在</li> <li>工程名称合法后，拉取远程模板代码</li> <li>远程模板代码下载完毕后，移除<code>.git</code>文件夹，下载依赖包</li> <li>一切完毕后，给个 tip 来提示运行命令</li></ul> <p>代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// create.js</span>
<span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs-extra'</span><span class="token punctuation">)</span> <span class="token comment">//fs的一个扩展，提供了非常多的便利API，并且继承了fs所有方法和为fs方法添加了promise的支持。</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ora <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ora'</span><span class="token punctuation">)</span> <span class="token comment">// loading</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> shell <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'execa'</span><span class="token punctuation">)</span> <span class="token comment">//execa是更好的子进程管理工具（A better child_process）。本质上就是衍生一个 shell，传入的 command 字符串在该 shell 中直接处理。</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> success<span class="token punctuation">,</span> err<span class="token punctuation">,</span> installDep <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/tool'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">GIT_VUE_PAHT</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/path'</span><span class="token punctuation">)</span>
<span class="token comment">// 获取工程名称</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getProName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> _projectName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'_projectName'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'你想创建的工程名称：'</span><span class="token punctuation">,</span>
      <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'Name is required!'</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">CWD</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> has already existed!`</span></span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> _projectName
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> projectName <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span>
  <span class="token keyword">const</span> <span class="token constant">CWD</span> <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>projectName <span class="token operator">&amp;&amp;</span> fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">CWD</span><span class="token punctuation">,</span> projectName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">err</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>projectName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 已经存在，请输入新的名称`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> _projectName <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getProName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    projectName <span class="token operator">=</span> _projectName
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>projectName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> _projectName <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getProName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    projectName <span class="token operator">=</span> _projectName
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> spinner <span class="token operator">=</span> <span class="token function">ora</span><span class="token punctuation">(</span><span class="token string">'创建工程中...'</span><span class="token punctuation">)</span>
  spinner<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> projectPath <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">CWD</span><span class="token punctuation">,</span> projectName<span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">shell</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`git clone -b master </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">GIT_VUE_PAHT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>projectName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>projectName<span class="token punctuation">,</span> <span class="token string">'.git'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">installDep</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'\n  创建成功,执行以下命令,启动项目'</span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`\n  cd </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>projectName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &amp;&amp; npm run dev`</span></span><span class="token punctuation">)</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">err</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h2 id="_5-init-命令"><a href="#_5-init-命令" aria-hidden="true" class="header-anchor">#</a> 5 init 命令</h2> <blockquote><p>init 命令的使用方法，<code>hkx init</code></p></blockquote> <p>实现思路与 create 类似，只不过不用获取工程名称（文件夹）</p> <p>代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// init.js</span>
<span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs-extra'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> shell <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'execa'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ora <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ora'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> success<span class="token punctuation">,</span> err<span class="token punctuation">,</span> writeHkxConfig<span class="token punctuation">,</span> hasYarn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/tool'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> __SRC_PATH<span class="token punctuation">,</span> __PAGE_PATH<span class="token punctuation">,</span> <span class="token constant">GIT_VUE_PAHT</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spinner <span class="token operator">=</span> <span class="token function">ora</span><span class="token punctuation">(</span><span class="token string">'正在初始化...'</span><span class="token punctuation">)</span>
  spinner<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">shell</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`git clone -b master </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">GIT_VUE_PAHT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'tmp'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./tmp/.git'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token constant">CWD</span> <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'tmp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">CWD</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'tmp'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> __packageLock <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">CWD</span><span class="token punctuation">,</span> <span class="token string">'package-lock.json'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span>__packageLock<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>__packageLock<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> yarnLockPath <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">CWD</span><span class="token punctuation">,</span> <span class="token string">'yarn.lock'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span>yarnLockPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>yarnLockPath<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> <span class="token function">shell</span><span class="token punctuation">(</span><span class="token function">hasYarn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token string">`yarn`</span></span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`npm i`</span></span><span class="token punctuation">)</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'\n 初始化成功'</span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'\n 使用 npm run dev 运行项目'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">err</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="_6-page-命令"><a href="#_6-page-命令" aria-hidden="true" class="header-anchor">#</a> 6 page 命令</h2> <blockquote><p>page 命令的使用方法，<code>hkx page [pageName]</code></p></blockquote> <p>实现思路</p> <ul><li>拿到页面名称，如果命令后面没有页面名称，那么就询问且输入页面名称</li> <li>判断页面名称是否合法，判断该页面名称的文件夹是否存在</li> <li>工程名称合法后，将脚手架中的<code>example</code>文件夹拷贝到项目的新页面目录中(此处的<code>example</code>应该放在远程模板中比较合适，此处为了演示，后续修改成远程)</li> <li>修改项目中的配置文件，复制<code>html</code>文件</li> <li>一切完毕后，给个 tip 来提示页面创建成功</li></ul> <p>代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs-extra'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ora <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ora'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> success<span class="token punctuation">,</span> err<span class="token punctuation">,</span> writeHkxConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/tool'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> __SRC_PATH<span class="token punctuation">,</span> __PAGE_PATH <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/path'</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 询问页面
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPageName</span><span class="token punctuation">(</span><span class="token parameter">pageName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> _pageName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'_pageName'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> pageName
        <span class="token operator">?</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">已存在，请重新输入：`</span></span>
        <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`请输入新页面的名称：`</span></span><span class="token punctuation">,</span>
      <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'页面不能为空！'</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">existPage</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 页面已存在！`</span></span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> _pageName
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">existPage</span><span class="token punctuation">(</span><span class="token parameter">pagename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> pagename<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">copyHtml</span><span class="token punctuation">(</span><span class="token parameter">pagename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> html <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../example.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    html <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
      <span class="token regex">/&lt;title&gt;([\s\S]*)&lt;\/title&gt;/</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token string">`&lt;title&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pagename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;\/title&gt;`</span></span>
    <span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__PAGE_PATH<span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pagename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> html<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> pageName <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageName <span class="token operator">||</span> <span class="token function">existPage</span><span class="token punctuation">(</span>pageName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pageName <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPageName</span><span class="token punctuation">(</span>pageName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> spinner <span class="token operator">=</span> <span class="token function">ora</span><span class="token punctuation">(</span><span class="token string">'正在创建...'</span><span class="token punctuation">)</span>
  spinner<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../example'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> dest <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> pageName<span class="token punctuation">)</span>
    <span class="token comment">// 复制文件</span>
    fs<span class="token punctuation">.</span><span class="token function">copySync</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dest<span class="token punctuation">)</span>
    <span class="token comment">// 修改config</span>
    <span class="token function">writeHkxConfig</span><span class="token punctuation">(</span>pageName<span class="token punctuation">)</span>
    <span class="token function">copyHtml</span><span class="token punctuation">(</span>pageName<span class="token punctuation">)</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`\n </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">页面创建成功`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">err</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h2 id="_7-route-命令"><a href="#_7-route-命令" aria-hidden="true" class="header-anchor">#</a> 7 route 命令</h2> <blockquote><p>page 命令的使用方法，<code>hkx route [routeName]</code></p></blockquote> <p>实现思路</p> <ul><li>拿到页面名称，判断页面是否合法且已经存在</li> <li>拿到路由名称，判断路由是否合法且不存在</li> <li>页面和路由都拿到后，修改该页面下的 router.js，增加路由</li> <li>将<code>example</code>文件夹里的路由文件 copy 到路由名称的文件夹</li> <li>一切完毕后，给个 tip 来提示页面创建成功</li></ul> <p>代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs-extra'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ora <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ora'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> success<span class="token punctuation">,</span> err<span class="token punctuation">,</span> normalizeEntry <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/tool'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> __HKX_CONFIG<span class="token punctuation">,</span> __SRC_PATH <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../util/path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> entry <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>__HKX_CONFIG<span class="token punctuation">)</span>
<span class="token comment">/**
 * 询问路由名称
 * @param {String} page         页面名称
 * @param {String} routeName    路由名称
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getRouteName</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> routeName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> _routeName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'_routeName'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> routeName
        <span class="token operator">?</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>routeName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">路由已存在，请输入新的路由`</span></span>
        <span class="token punctuation">:</span> <span class="token string">'你想创建的路由名称：'</span><span class="token punctuation">,</span>
      <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'请输入路由名称！'</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">existRoute</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> routeName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>routeName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">路由已存在,请重新输入`</span></span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> _routeName
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 询问页面
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> _pageName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'_pageName'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'你想为哪个页面创建路由：'</span><span class="token punctuation">,</span>
      <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'页面不能为空！'</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 页面不存在！`</span></span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> _pageName
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">existRoute</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> route</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> page<span class="token punctuation">,</span> <span class="token string">'views'</span><span class="token punctuation">,</span> route<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 询问确认在这页面创建路由
 * @param {String} pageName
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">questionAgain</span><span class="token punctuation">(</span><span class="token parameter">pageName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> _pageName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'_pageName'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`即将为</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">页面创建路由，你可以再次修改`</span></span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> pageName<span class="token punctuation">,</span>
      <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'页面不能为空！'</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">pathExistsSync</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 页面不存在！`</span></span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> _pageName
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> routeName <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span>
  <span class="token keyword">let</span> pageName <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">normalizeEntry</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pageName <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>routeName <span class="token operator">||</span> <span class="token function">existRoute</span><span class="token punctuation">(</span>pageName<span class="token punctuation">,</span> routeName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    routeName <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getRouteName</span><span class="token punctuation">(</span>pageName<span class="token punctuation">,</span> routeName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  pageName <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">questionAgain</span><span class="token punctuation">(</span>pageName<span class="token punctuation">)</span>
  <span class="token comment">/** 拿到页面名称和路由名称 **/</span>
  <span class="token keyword">const</span> spinner <span class="token operator">=</span> <span class="token function">ora</span><span class="token punctuation">(</span><span class="token string">'正在创建路由...'</span><span class="token punctuation">)</span>
  spinner<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> routeRgx <span class="token operator">=</span> <span class="token regex">/routes:\s*\[([\s\S]*)\]/</span>
    <span class="token keyword">let</span> routeInfo <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>
      <span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> pageName<span class="token punctuation">,</span> <span class="token string">'router'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        encoding<span class="token punctuation">:</span> <span class="token string">'utf-8'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    routeInfo <span class="token operator">=</span> routeInfo<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>routeRgx<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> $<span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> flag <span class="token operator">=</span> $<span class="token number">1.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`routes: [
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>$<span class="token number">1.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>flag <span class="token operator">?</span> <span class="token string">''</span> <span class="token punctuation">:</span> <span class="token string">','</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    {
      path: '/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>routeName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',
      name: '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>routeName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',
      meta: {
        title: '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>routeName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'
      },
      component: () =&gt; import(/* webpackChunkName: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/route.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>routeName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; */'../views/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>routeName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">')
    }
  ]`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>
      <span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> pageName<span class="token punctuation">,</span> <span class="token string">'router'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      routeInfo
    <span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">copySync</span><span class="token punctuation">(</span>
      <span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'example'</span><span class="token punctuation">,</span> <span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">join</span><span class="token punctuation">(</span>__SRC_PATH<span class="token punctuation">,</span> pageName<span class="token punctuation">,</span> <span class="token string">'views'</span><span class="token punctuation">,</span> routeName<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'\n 路由创建成功'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">err</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/hkx930919/book/edit/master/front-docs/cli.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">5/31/2020, 11:43:08 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/book/front-docs/a-typescript.html" class="prev">
          typescript
        </a></span> <span class="next"><a href="/book/front-docs/vue.html">
          vue
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/book/assets/js/app.983c8796.js" defer></script><script src="/book/assets/js/5.1742c36e.js" defer></script>
  </body>
</html>
